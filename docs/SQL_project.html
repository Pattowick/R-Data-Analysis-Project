<!-- Updated version of your SQL project page with enhancements -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SQL Project Portfolio ‚Äì Wise Case</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet"/>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #fcfcfc;
      overflow-x: hidden;
    }
    header {
      background-color: #ffffff;
      padding: 20px 50px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    header h1 {
      font-size: 1.5rem;
      font-weight: 700;
    }
    .nav-links a {
      margin-left: 30px;
      text-decoration: none;
      color: #333;
      font-weight: 500;
      padding: 6px 14px;
      border-radius: 20px;
      transition: all 0.3s ease;
    }
    .nav-links a:hover {
      box-shadow: 0 0 0 2px #333;
    }
    .nav-links a.btn {
      border: 1px solid #ccc;
    }
    .section {
      padding: 80px 10%;
    }
    .section-title {
      font-size: 2.5rem;
      font-weight: 700;
      text-align: center;
      margin-bottom: 16px;
    }
    .section-subtitle {
      text-align: center;
      color: #666;
      margin-bottom: 24px;
      font-size: 1.1rem;
    }
    .disclaimer {
      background-color: #f8f9fa;
      border-left: 4px solid #5d7cfb;
      padding: 20px;
      font-size: 0.95rem;
      color: #444;
      margin-bottom: 40px;
      border-radius: 6px;
    }
    .query-img {
      width: 100%;
      max-width: 1000px;
      max-height:1000px;
      display: block;
      margin: 30px auto;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      border-radius: 10px;
      transition: transform 0.2s ease;
    }
    .query-img:hover {
      transform: scale(1.01);
    }
    pre code {
      background: #f4f4f4;
      padding: 20px;
      display: block;
      border-radius: 6px;
      overflow-x: auto;
      font-size: 0.95rem;
    }
    h3 {
      margin-top: 50px;
      font-weight: 600;
      font-size: 1.4rem;
    }
    }
    ul {
      color: #444;
    }
    .highlight {
      background-color: #eef2ff;
      border-left: 4px solid #5d7cfb;
      padding: 12px 16px;
      margin-top: 20px;
      margin-bottom: 30px;
      border-radius: 6px;
    }
    footer {
      text-align: center;
      padding: 40px 0 20px;
      font-size: 0.85rem;
      color: #aaa;
    }
  </style>
</head>
<body>
  <header>
    <h1>Patrick Tan</h1>
    <div class="nav-links">
      <a href="index.html">HOME</a>
      <a href="about.html">ABOUT</a>
      <a href="index.html#projects">PORTFOLIO</a>
      <a href="contactme.html">CONTACT ME</a>
      <a href="resume.html" class="btn">RESUME</a>
    </div>
  </header>

  <section class="section">
    <h2 class="section-title">SQL Project Portfolio</h2>
    <p class="section-subtitle">Analysis on Wise's Average Profitability on Various Transaction Types using SQL</p>
    <p class="section-subtitle"><b>Disclaimer:</b><i>This project is based on a take-home case study completed as part of my application for a Data Analyst position at Wise. To respect the company‚Äôs confidentiality and ensure data protection, the original dataset cannot be shared. Only selected SQL queries and insights have been included to demonstrate my technical capabilities. The result obtained in this case study is also <b>NOT</b> an actual representation of Wise's Performance.</i></p>
    
    <div class="row justify-content-center mb-5">
  <div class="col-auto text-center">
    <div class="p-3 shadow-sm rounded" style="width: 120px;">
      <i class="fas fa-database fa-2x mb-2 text-primary"></i>
      <div style="font-size: 0.9rem;">PostgreSQL</div>
    </div>
  </div>
  <div class="col-auto text-center">
    <div class="p-3 shadow-sm rounded" style="width: 120px;">
      <i class="fas fa-leaf fa-2x mb-2 text-success"></i>
      <div style="font-size: 0.9rem;">MongoDB</div>
    </div>
  </div>
</div>

    <h3>üîç Project Overview</h3>
    <p>This assessment involved analyzing a transactional dataset using PostgreSQL. I worked with multiple tables to evaluate <b>customer behavior</b>, compute <b>conversion revenue</b>, and optimize <b>query performance</b> using <b>CTE, Joins & Aggregations</b>. To enhance query readability and efficiency, I utilized CTEs mainly to prepare my tables before aggregating to obtain the solution.</p>

    <h3>üß† Key SQL Techniques Used</h3>
    <ul>
      <li>JOINs across <code>transaction</code>, <code>rates</code>, <code>cost_structure</code> and <code>cards</code> tables</li>
      <li>Common Table Expressions (CTEs)</li>
      <li>Data filtering and transformation using CASE, WHERE, GROUP BY</li>
    </ul>

    <h3>Problem Statement: What is the average profit for each transaction type?</h3>
    <br>


    <h3><b>üì∏ CTE 1: Conversion Revenue</b></h3>
    <img src="conversion_revenue.jpg" alt="SQL Query Screenshot" class="query-img">

    <h3>üí° Conversion Revenue CTE - Query Explanation</h3>
    <p>In this CTE, my objective is to calculate the income that the company earns whenever there is a transaction that requires currency conversion.
    Hence the formula that I will be using will be as such:<br><br><i>Billing amount in GBP - (amount spent * exchange rate to GBP)</i><br><br>
    I also ensure that only <b>successful transactions</b> are included.</p>
    
    <h3><b>üì∏ CTE 2: Cost Lookup</b></h3>
    <img src="cost_lookup.jpg" alt="SQL Query Screenshot" class="query-img">
    
    <h3>üí° Cost Lookup CTE - Query Explanation</h3>
    <p>This part will simply act as a <b>lookup table</b> for the cost structure when I am computing the <b>cost in the transaction table.</b></p>
    
    <h3><b>üì∏ CTE 3: Base Transactions</b></h3>
    <img src="base_transactions.jpg" alt="SQL Query Screenshot" class="query-img">
    
    <h3>üí° Transactions CTE - Query Explanation</h3>
    <p>In this section, I will introduce the <b>main table</b> that we are using for analysis. Additionally, to ensure consistency in the calculation of
    profit, all the calculation units will be in GBP</p>
    
    <h3><b>üì∏ CTE 4: Transaction Costs</b></h3>
    <img src="transaction_cost.jpg" alt="SQL Query Screenshot" class="query-img">
    
    <h3>üí° Transaction Costs CTE - Query Explanation</h3>
    <p>In this CTE, I have <b>joined</b> the <b>transactions table</b> with the <b>cost structure table</b> based on the <u>transaction type</u> and its respective <u>cost region</u>. Furthermore, as the cost structure table for each transaction type and cost region has its own cost lines which contains <b>fixed and variable costs</b>, I compiled all the cost value into a single column so that aggregations can be carried out easier. That is to say, <b>fixed cost will simply take the cost value at face</b> while <b>variable cost are treated as percentage</b> which will be applied to the amount spent in the respective transaction</p>
    
    <h3><b>üì∏ CTE 5: Aggregated Costs</b></h3>
    <img src="aggregated_costs.jpg" alt="SQL Query Screenshot" class="query-img">
    
    <h3>üí° Aggregated Costs CTE - Query Explanation</h3>
    <p>The summation of these computed costs will be carried in this CTE, where they are grouped by <b>transaction type, transaction cost type, interchange fee and conversion revenue</b></p>
    
    <h3><b>üì∏ Final Computation: Profit</b></h3>
    <img src="profits.jpg" alt="SQL Query Screenshot" class="query-img">
    
    <h3>üí° Profits - Query Explanation</h3>
    <p>The final step will be taking the summation of the revenue and total costs to obtain the profits for each transactions and applying average to obtain the average profit of each transactions. This is then grouped by transaction type so that we can obtain the solution to the problem statement for the average profit of each transaction type. The formula used is as follows:<br><br>
    (Conversion Revenue + Interchange Fee) - Total Cost<br><br></p>
    
    
    
    

    <h3>üìä SQL Query Result</h3>
    <img src="sqlresult.jpg" alt="SQL Query Screenshot" class="query-img">
    <p>As a result, I obtained the average profit for each of the transaction type listed above. I will not be including the insights & recommendation discussion as it is related to the
    assessment. <br><br>Furthermore, I would like to emphasize that this result is <b>NOT an actual representation of Wise's Performance as this is solely for the purpose of the case study</b></p>
  </section>

  <footer style="background-color: #1e1e2f; color: #ccc; padding: 50px 10% 30px;">
  <div class="container-fluid px-5">
    <div class="d-flex flex-column flex-md-row justify-content-between gap-5 text-center text-md-start">

      <!-- About Section -->
      <div style="flex: 1;">
        <h5 style="color: #ffffff; font-weight: 600; margin-bottom: 16px;">About Me</h5>
        <p style="font-size: 0.95rem; line-height: 1.6;">
          This is my personal portfolio, built to showcase key projects, technical skillsets, and competency in data analysis, dashboard skills, and creative problem solving.
        </p>
        <p style="font-size: 0.85rem; margin-top: 25px; color: #aaa;">
          &copy; 2025 Patrick Tan. All rights reserved.<br>
          Built with R. Free Website Template from Colorlib.
        </p>
      </div>

      <!-- Soft Skills Section -->
      <div style="flex: 1;">
        <h5 style="color: #ffffff; font-weight: 600; margin-bottom: 16px;">Soft Skills & Languages</h5>
        <p style="font-size: 0.95rem; line-height: 1.6;">
          Effective Communication<br>
          Adaptability & Resilience<br>
          Project Management<br>
          Analytical<br>
          Multilingual: English (Native), Korean (Advanced), Mandarin (Intermediate)
        </p>
      </div>

      <!-- Social Media Section -->
      <div style="flex: 1;">
        <h5 style="color: #ffffff; font-weight: 600; margin-bottom: 16px;">Connect With Me</h5>
        <div style="font-size: 1.3rem; margin-top: 12px;">
          <a href="https://www.linkedin.com/in/patrick-tan20" target="_blank" style="color: #99b3ff; margin-right: 20px;"><i class="fab fa-linkedin"></i></a>
          <a href="https://github.com/pattowick" target="_blank" style="color: #99b3ff; margin-right: 20px;"><i class="fab fa-github"></i></a>
          <a href="mailto:patricktan98@gmail.com" style="color: #99b3ff;"><i class="fas fa-envelope"></i></a>
        </div>
      </div>

    </div>
  </div>
</footer>


</body>
</html>